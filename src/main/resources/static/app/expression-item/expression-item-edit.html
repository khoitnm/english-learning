<style>
    .wrap-dd-menu {
        padding: 0px;
    }
</style>
<!--<div class="page-title">-->
<!--<div class="title_left">-->
<!--<h3>-->
<!--Lesson Editing-->
<!--</h3>-->
<!--</div>-->
<!--</div>-->
<!--<div class="clearfix"></div>-->
<!--<div class="ln_solid"></div>-->
<div class="row">
    <div class="col-md-2">
        <a href='' title=''
           dropdown-menu="lessonEditService.menu.items"
           dropdown-model="lessonEditService.menu.selectedItem"
           dropdown-item-label="text">
            <i class="fa fa-folder-open"></i> Recent Lessons
        </a>
    </div>
    <div class="col-md-2">
        <a href="#!/expression-item-test?lessonId={{lessonEditService.lesson.id}}"><i class="fa fa-tasks"></i> Test this Lesson</a>
    </div>
</div>
<div class="ln_solid" style="margin: 10px 0px;"></div>
<div class="row">
    <div class="col-md-12">
        <!-- Topic -->
        <div class="x_panel">
            <div class="x_title">
                <h2 style="width: 100%">
                    <input ng-model="lessonEditService.lesson.name" type="text" placeholder="Lesson" class="input-as-text"/>
                </h2>
                <ul class="nav navbar-right panel_toolbox">
                    <!--<li>-->
                    <!--<a class="collapse-link"><i class="fa fa-chevron-up"></i></a>-->
                    <!--</li>-->
                    <!--<li class="dropdown">-->
                    <!--<a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false"><i class="fa fa-wrench"></i></a>-->
                    <!--<ul class="dropdown-menu" role="menu">-->
                    <!--<li><a href="#">Settings 1</a>-->
                    <!--</li>-->
                    <!--<li><a href="#">Settings 2</a>-->
                    <!--</li>-->
                    <!--</ul>-->
                    <!--</li>-->
                    <!--<li style="float: right">-->
                    <!--<a><i class="fa fa-chevron-up"></i></a>-->
                    <!--</li>-->
                    <!--<li>-->
                    <!--<a class="close-link"><i class="fa fa-plus" ng-click="lessonEditService.addTopic()"></i></a>-->
                    <!--</li>-->
                </ul>
                <div class="clearfix"></div>
            </div>
            <div class="x_content">
                <div class="row">
                    <div class="col-lg-11">
                        <input type="text"
                               ng-repeat="topic in lessonEditService.lesson.topics"
                               ng-model="topic.name"
                               placeholder="Topic"/>
                    </div>
                    <div class="col-lg-1">
                        <a class="close-link"><i class="fa fa-plus" ng-click="lessonEditService.addTopic()"></i></a>
                    </div>
                </div>
                <div class="ln_solid"></div>
                <!-- Expression Items Table -->
                <div class="table-responsive">
                    <!--<button ng-click="lessonEditService.addExpressionItem()">Add expression item</button>-->
                    <table class="table-input-as-text">
                        <thead>
                        <tr>
                            <th colspan="4">
                                Expression <a href=""><i class="fa fa-adjust" ng-click="lessonEditService.onOffExpression()"></i></a>
                            </th>
                            <th>
                                Meaning <a href=""><i class="fa fa-adjust" ng-click="lessonEditService.onOffMeaning()"></i></a>
                            </th>
                        </tr>
                        </thead>
                        <tbody>
                        <tr class="expression-item-row" ng-repeat="expressionItem in lessonEditService.lesson.expressionItems">
                            <td style="width: 25px; ">
                                <span style="padding-left:5px; line-height: 24px;">{{$index + 1}}</span>
                            </td>
                            <td style="width: 20px">
                                <a href=""
                                   ng-class="lessonEditService.isShowExpression ? '': 'transparent'"
                                   ng-click="lessonEditService.favourite(expressionItem)">
                                    <i class="fa favourite" ng-class="expressionItem.userPoints[USER_ID].favourite == -1 ? 'fa-star':'fa-star-o'"></i>
                                </a>
                            </td>
                            <td style="width: 30%">
                                <input type="text"
                                       ng-class="lessonEditService.isShowExpression ? '': 'transparent'"
                                       ng-model="expressionItem.expression"
                                       ng-change="lessonEditService.addExpressionItemIfNecessary(expressionItem)"
                                       ng-focus="lessonEditService.focusExpressionItem(expressionItem)"
                                       ng-blur="lessonEditService.translateExpressionItem(expressionItem)"
                                       placeholder="expression {{$index + 1}}" class="cell-input expression"/>

                            </td>
                            <td>
                                <a href=""
                                   ng-class="lessonEditService.isShowExpression ? '': 'transparent'"
                                   ng-click="lessonEditService.playSound(expressionItem)">
                                    <i class="fa fa-volume-up"></i>
                                </a>
                            </td>
                            <td>
                                <table width="100%" ng-class="lessonEditService.isShowMeaning? '': 'transparent'">
                                    <tr ng-repeat="meaning in expressionItem.meanings">
                                        <td style="width: 60px;">
                                            <input type="text"
                                                   class="part-of-speech"
                                                   ng-model="meaning.wordType" capitalize
                                                   ng-change="lessonEditService.addExpressionMeaningIfNecessary(expressionItem, meaning)"/>
                                            <!--<angucomplete-alt
                                                    placeholder="type"
                                                    pause="100"
                                                    selected-object="meaning.wordTypeObject"
                                                    local-data="lessonEditService.wordTypes"
                                                    search-fields="label"
                                                    title-field="label"
                                                    input-changed="lessonEditService.selectWordType"
                                                    minlength="1"
                                                    match-class="highlight"/>-->
                                        </td>
                                        <td>
                                            <!--<input type="text" ng-model="meaning.explanation" ng-change="lessonEditService.addExpressionMeaningIfNecessary(expressionItem, meaning)"/>-->
                                            <textarea class="form-control"
                                                      rows="{{meaning.explanationLinesLength || 1}}"
                                                      ng-model="meaning.explanation"
                                                      ng-change="lessonEditService.changeExpressionMeaning(this,expressionItem, meaning)"
                                                      ng-focus="lessonEditService.changeExpressionMeaning(this,expressionItem, meaning)"
                                                      ng-trim="true"
                                                      placeholder="explanation {{$index + 1}}"></textarea>
                                            <table style="width: 100%">
                                                <tr ng-repeat="example in meaning.examples  track by $index">
                                                    <td style="width: 35px"><label class="example {{meaning.explanation? 'active-meaning': 'inactive-meaning'}}  {{example? 'active-example': 'inactive-example'}}" ng-show="$index == 0">e.g. </label></td>
                                                    <td>
                                                        <textarea class="form-control"
                                                                  rows="2"
                                                                  ng-model="meaning.examples[$index]"
                                                                  ng-change="lessonEditService.addMeaningExampleIfNecessary(meaning, example,$index)"
                                                                  ng-focus="lessonEditService.addMeaningExampleIfNecessary(meaning, example,$index)"
                                                                  placeholder="example"></textarea>
                                                    </td>
                                                </tr>
                                            </table>
                                        </td>
                                    </tr>
                                </table>
                            </td>
                        </tr>
                        </tbody>
                    </table>
                </div>
                <div class="ln_solid"></div>
                <!--Save button-->
                <div class="form-group">
                    <div class="col-md-6 col-sm-6 col-xs-12">
                        <button type="submit" class="btn btn-success" ng-click="lessonEditService.saveLesson()">Save</button>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>